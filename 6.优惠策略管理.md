### 数据库设计SQL

```sql
-- 优惠策略表
CREATE TABLE IF NOT EXISTS `fa_fzly_promotion` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `name` varchar(100) NOT NULL COMMENT '优惠活动名称',
  `type` enum('discount','full_reduction','buy_gift','member_price') NOT NULL COMMENT '优惠类型：discount=折扣券,full_reduction=满减券,buy_gift=买赠活动,member_price=会员专属价',
  `description` text COMMENT '活动描述',
  `start_time` bigint(16) NOT NULL COMMENT '活动开始时间',
  `end_time` bigint(16) NOT NULL COMMENT '活动结束时间',
  `status` enum('normal','hidden','expired') DEFAULT 'normal' COMMENT '状态：normal=正常,hidden=暂停,expired=已过期',
  `cover_image` varchar(255) DEFAULT NULL COMMENT '活动封面图',
  `total_receive` int(10) DEFAULT 0 COMMENT '总领取次数',
  `total_use` int(10) DEFAULT 0 COMMENT '总使用次数',
  `total_discount` decimal(12,2) DEFAULT 0.00 COMMENT '总优惠金额',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  `deletetime` bigint(16) DEFAULT NULL COMMENT '删除时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='优惠策略表';

-- 优惠规则表
CREATE TABLE IF NOT EXISTS `fa_fzly_promotion_rule` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `promotion_id` int(10) unsigned NOT NULL COMMENT '关联优惠活动ID',
  `condition_amount` decimal(10,2) DEFAULT 0.00 COMMENT '触发金额条件（满多少）',
  `discount_value` decimal(10,2) NOT NULL COMMENT '优惠值（折扣率/减免金额/赠品ID）',
  `limit_per_person` int(10) DEFAULT 1 COMMENT '每人限领/用次数',
  `total_quota` int(10) DEFAULT 0 COMMENT '总数量限制（0为无限制）',
  `member_level` varchar(255) DEFAULT NULL COMMENT '适用会员等级（JSON）',
  `use_limit` text COMMENT '使用限制说明',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `promotion_id` (`promotion_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='优惠规则表';

-- 优惠适用产品表
CREATE TABLE IF NOT EXISTS `fa_fzly_promotion_product` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `promotion_id` int(10) unsigned NOT NULL COMMENT '关联优惠活动ID',
  `product_type` enum('ticket','goods') NOT NULL COMMENT '产品类型：ticket=门票,goods=商品',
  `product_id` int(10) unsigned NOT NULL COMMENT '产品ID',
  `product_name` varchar(255) NOT NULL COMMENT '产品名称',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `promotion_id` (`promotion_id`),
  KEY `product_type_id` (`product_type`,`product_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='优惠适用产品表';

-- 优惠发放渠道表
CREATE TABLE IF NOT EXISTS `fa_fzly_promotion_channel` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `promotion_id` int(10) unsigned NOT NULL COMMENT '关联优惠活动ID',
  `channel` enum('mini_program','offline_window','ota','self_operated') NOT NULL COMMENT '发放渠道：mini_program=小程序,offline_window=线下窗口,ota=OTA分销,self_operated=自营',
  `channel_name` varchar(50) NOT NULL COMMENT '渠道名称',
  `start_time` bigint(16) DEFAULT NULL COMMENT '渠道发放开始时间',
  `end_time` bigint(16) DEFAULT NULL COMMENT '渠道发放结束时间',
  `status` enum('normal','hidden') DEFAULT 'normal' COMMENT '状态',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  `updatetime` bigint(16) DEFAULT NULL COMMENT '更新时间',
  PRIMARY KEY (`id`) USING BTREE,
  KEY `promotion_id` (`promotion_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='优惠发放渠道表';

-- 优惠统计数据表
CREATE TABLE IF NOT EXISTS `fa_fzly_promotion_stat` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'ID',
  `promotion_id` int(10) unsigned NOT NULL COMMENT '关联优惠活动ID',
  `stat_date` date NOT NULL COMMENT '统计日期',
  `receive_count` int(10) DEFAULT 0 COMMENT '当日领取次数',
  `use_count` int(10) DEFAULT 0 COMMENT '当日使用次数',
  `sales_increase` int(10) DEFAULT 0 COMMENT '销量增长数',
  `discount_amount` decimal(12,2) DEFAULT 0.00 COMMENT '当日优惠金额',
  `verification_rate` decimal(5,2) DEFAULT 0.00 COMMENT '核销率(%)',
  `createtime` bigint(16) DEFAULT NULL COMMENT '创建时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE KEY `promotion_date` (`promotion_id`,`stat_date`),
  KEY `stat_date` (`stat_date`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='优惠统计数据表';

-- 测试数据插入
INSERT INTO `fa_fzly_promotion` (`name`, `type`, `description`, `start_time`, `end_time`, `status`, `cover_image`, `createtime`, `updatetime`) 
VALUES 
('夏季门票8折活动', 'discount', '夏季旅游旺季门票8折优惠活动', UNIX_TIMESTAMP('2024-06-01'), UNIX_TIMESTAMP('2024-08-31'), 'normal', '/uploads/202405/promotion1.jpg', UNIX_TIMESTAMP(), UNIX_TIMESTAMP()),
('满200减50活动', 'full_reduction', '消费满200元立减50元', UNIX_TIMESTAMP('2024-07-01'), UNIX_TIMESTAMP('2024-07-31'), 'normal', '/uploads/202405/promotion2.jpg', UNIX_TIMESTAMP(), UNIX_TIMESTAMP()),
('购票赠小礼品', 'buy_gift', '购买任意门票赠送景区纪念品', UNIX_TIMESTAMP('2024-06-15'), UNIX_TIMESTAMP('2024-09-15'), 'normal', '/uploads/202405/promotion3.jpg', UNIX_TIMESTAMP(), UNIX_TIMESTAMP());

INSERT INTO `fa_fzly_promotion_rule` (`promotion_id`, `condition_amount`, `discount_value`, `limit_per_person`, `total_quota`, `member_level`, `createtime`) 
VALUES 
(1, 0.00, 80.00, 3, 1000, '["1","2","3"]', UNIX_TIMESTAMP()),
(2, 200.00, 50.00, 2, 500, '["1","2","3","4","5"]', UNIX_TIMESTAMP()),
(3, 0.00, 101.00, 1, 300, '[]', UNIX_TIMESTAMP());

INSERT INTO `fa_fzly_promotion_product` (`promotion_id`, `product_type`, `product_id`, `product_name`, `createtime`) 
VALUES 
(1, 'ticket', 1, '成人票', UNIX_TIMESTAMP()),
(1, 'ticket', 2, '儿童票', UNIX_TIMESTAMP()),
(2, 'ticket', 1, '成人票', UNIX_TIMESTAMP()),
(2, 'goods', 5, '景区特产礼盒', UNIX_TIMESTAMP()),
(3, 'ticket', 1, '成人票', UNIX_TIMESTAMP()),
(3, 'ticket', 3, '家庭套票', UNIX_TIMESTAMP());

INSERT INTO `fa_fzly_promotion_channel` (`promotion_id`, `channel`, `channel_name`, `start_time`, `end_time`, `status`, `createtime`) 
VALUES 
(1, 'mini_program', '小程序', UNIX_TIMESTAMP('2024-06-01'), UNIX_TIMESTAMP('2024-08-31'), 'normal', UNIX_TIMESTAMP()),
(1, 'offline_window', '线下售票窗口', UNIX_TIMESTAMP('2024-06-01'), UNIX_TIMESTAMP('2024-08-31'), 'normal', UNIX_TIMESTAMP()),
(2, 'mini_program', '小程序', UNIX_TIMESTAMP('2024-07-01'), UNIX_TIMESTAMP('2024-07-31'), 'normal', UNIX_TIMESTAMP()),
(2, 'ota', 'OTA平台', UNIX_TIMESTAMP('2024-07-01'), UNIX_TIMESTAMP('2024-07-31'), 'normal', UNIX_TIMESTAMP()),
(3, 'offline_window', '线下售票窗口', UNIX_TIMESTAMP('2024-06-15'), UNIX_TIMESTAMP('2024-09-15'), 'normal', UNIX_TIMESTAMP());

INSERT INTO `fa_fzly_promotion_stat` (`promotion_id`, `stat_date`, `receive_count`, `use_count`, `sales_increase`, `discount_amount`, `verification_rate`, `createtime`) 
VALUES 
(1, '2024-06-01', 50, 30, 25, 600.00, 60.00, UNIX_TIMESTAMP()),
(1, '2024-06-02', 75, 45, 30, 900.00, 60.00, UNIX_TIMESTAMP()),
(2, '2024-07-01', 30, 18, 15, 900.00, 60.00, UNIX_TIMESTAMP());
```

### CRUD命令生成

```bash
# 优惠策略表CRUD
php think crud -t fzly_promotion -c fzly/promotion -m fzly/promotion -u 1

# 优惠规则表CRUD
php think crud -t fzly_promotion_rule -c fzly/promotionrule -m fzly/promotionrule -u 1

# 优惠适用产品表CRUD
php think crud -t fzly_promotion_product -c fzly/promotionproduct -m fzly/promotionproduct -u 1

# 优惠发放渠道表CRUD
php think crud -t fzly_promotion_channel -c fzly/promotionchannel -m fzly/promotionchannel -u 1

# 优惠统计数据表CRUD
php think crud -t fzly_promotion_stat -c fzly/promotionstat -m fzly/promotionstat -u 1
```

### 说明

1. 数据库设计覆盖了所有核心功能点：
    - 优惠类型：通过`fa_fzly_promotion`表的`type`字段区分
    - 规则设置：在`fa_fzly_promotion_rule`表中定义各种规则条件
    - 发放管理：通过`fa_fzly_promotion_channel`表管理发放渠道
    - 效果统计：`fa_fzly_promotion_stat`表记录各项统计指标
    - 联动模块：通过产品关联表实现与各销售模块的联动

2. 表结构设计考虑了：
    - 时间范围控制（开始/结束时间）
    - 数量限制（每人限用、总限量）
    - 多渠道发放管理
    - 详细的统计分析字段
    - 软删除功能

3. 生成的CRUD命令会在指定目录下创建对应的控制器、模型和视图文件，符合FastAdmin框架规范。

4. 页面风格会自动继承FastAdmin的默认风格，与参考页面保持一致的UI体验。